<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How it works • rtrackr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How it works">
<meta property="og:description" content="rtrackr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rtrackr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting_started.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/how_it_works.html">How it works</a>
    </li>
    <li>
      <a href="../articles/multiple_history.html">Multiple history workflow</a>
    </li>
    <li>
      <a href="../articles/single_history.html">Single history workflow</a>
    </li>
    <li>
      <a href="../articles/summarising_data.html">Summarising data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="how_it_works_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>How it works</h1>
            
      
      
      <div class="hidden name"><code>how_it_works.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level3">
<h3 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h3>
<p><code>rtrackr</code> provides a way to track changes to individual records during program execution in R. <code>rtrackr</code> relies on the <code><a href="../reference/trackr_new.html">trackr_new()</a></code> and <code><a href="../reference/trackr_timepoint.html">trackr_timepoint()</a></code> functions to initiate dataset tracking and log important points in the data processing chain.</p>
<p><strong>Please Note:</strong></p>
<p><em><code>rtrackr</code> relies on the <code>trackr_id</code> column to identify a record and its lineage. If this column is deleted or altered - it is not possible to continue tracking records using <code>rtrackr</code>. For more details on the special case of summarising data with <code>rtrackr</code> see <a href="https://hamishgibbs.github.io/rtrackr/articles/summarising_data.html">Summarising data</a>.</em></p>
<p><em><code>rtrackr</code> relies on the <code>sha1</code> hash function exported from <code><a href="https://rdrr.io/pkg/digest/man/sha1.html">digest::sha1</a></code>. <code>sha1</code> has been chosen because of the relatively short hashes that it produces, reducing the file size of log files. Using <code>sha1</code> increases the (unlikely) probability of a hash collision. Please see more information on the <code>sha1</code> hash function <a href="https://en.wikipedia.org/wiki/SHA-1">here</a>.</em></p>
</div>
<div id="the-trackr_id-column" class="section level3">
<h3 class="hasAnchor">
<a href="#the-trackr_id-column" class="anchor"></a>The trackr_id column</h3>
<p>The <code>trackr_id</code> column is an id field that uniquely identifies each record in a dataset. Each <code>trackr_id</code> has two components, separated by an underscore <code>"_"</code>.</p>
<p>The first component of a <code>trackr_id</code> is the hash of a the parent log file, used to identify the log file where a record’s parent record is stored. The parent file hash is defined as the hash of the timepoint timestamp (a UNIX timestamp) + collapsed row hashes (see below).</p>
<p>The second component of a trackr_id is the row hash of each individual record. The row hash is the hash of a string made up of all values in a row, separated by an empty string <code>""</code>. Considering a dataframe of one row with values <code>a = "a"</code> and <code>b = 1</code>, the row hash would be computed as <code><a href="https://rdrr.io/pkg/digest/man/sha1.html">digest::sha1("a1")</a></code>, or <code>4751028c3d830cf93f7d1e64d5e4d58c9d01ee32</code>.</p>
<details><p><summary>Details</summary> Defining the example dataset:</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="no">df</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">a</span> <span class="kw">=</span> <span class="st">'a'</span>, <span class="kw">b</span> <span class="kw">=</span> <span class="fl">1</span>)</pre></body></html></div>
<table class="table table table-striped table-hover table-condensed">
<thead><tr>
<th style="text-align:left;">
a
</th>
<th style="text-align:right;">
b
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:right;">
1
</td>
</tr></tbody>
</table>
<p>An example row hash for the first (and only) row of the dataframe:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">row</span> <span class="kw">&lt;-</span> <span class="st">'a1'</span>
<span class="kw pkg">digest</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/digest/man/sha1.html">sha1</a></span>(<span class="no">row</span>)</pre></body></html></div>
<pre><code>## [1] "4751028c3d830cf93f7d1e64d5e4d58c9d01ee32"</code></pre>
</details><p>The file hash of this dataframe at UNIX time <code>1592300508</code> would therefore be <code><a href="https://rdrr.io/pkg/digest/man/sha1.html">digest::sha1("15923005084751028c3d830cf93f7d1e64d5e4d58c9d01ee32")</a></code>, or <code>566f5d1c67d708801092ded906f6180d5ae40c0a</code>.</p>
<details><p><summary>Details</summary> Using the same row hash as above:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">file_hash</span> <span class="kw">&lt;-</span> <span class="kw pkg">digest</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/digest/man/sha1.html">sha1</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'1592300508'</span>, <span class="kw pkg">digest</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/digest/man/sha1.html">sha1</a></span>(<span class="no">row</span>)))</pre></body></html></div>
</details><p>For a dataframe with two rows, <code>a = "a"</code>, <code>b = 1</code> and <code>a = "b"</code>, <code>b = 2</code>, recorded at UNIX time <code>1592300508</code>, the file hash would be <code><a href="https://rdrr.io/pkg/digest/man/sha1.html">digest::sha1("15923005084751028c3d830cf93f7d1e64d5e4d58c9d01ee32d6543aeb67806714fa9e9567dc5c46b2106ae843")</a></code>, or <code>60a98eebfddc76740acc443d9687f56b37a47893</code>.</p>
<details><p><summary>Details</summary></p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="kw pkg">digest</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/digest/man/sha1.html">sha1</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'1592300508'</span>, <span class="kw pkg">digest</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/digest/man/sha1.html">sha1</a></span>(<span class="st">'a1'</span>), <span class="kw pkg">digest</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/digest/man/sha1.html">sha1</a></span>(<span class="st">'b2'</span>)))</pre></body></html></div>
<pre><code>## [1] "60a98eebfddc76740acc443d9687f56b37a47893"</code></pre>
</details>
</div>
<div id="validating-a-trackr-data-log" class="section level3">
<h3 class="hasAnchor">
<a href="#validating-a-trackr-data-log" class="anchor"></a>Validating a trackr data log</h3>
<p>For more information on getting started with<code>rtrackr</code> please see <a href="https://hamishgibbs.github.io/rtrackr/articles/getting_started.html">Getting started</a>.</p>
<p><a href="https://hamishgibbs.github.io/rtrackr/reference/trackr_new.html"><code><a href="../reference/trackr_new.html">trackr_new()</a></code></a> and <a href="https://hamishgibbs.github.io/rtrackr/reference/trackr_timepoint.html"><code><a href="../reference/trackr_timepoint.html">trackr_timepoint()</a></code></a> both provide the option to write a data log along with a standard trackr log file with the argument <code>log_data = TRUE</code>. This is recommended, as it provides a full history of all timepoints in a data processing chain, but may not be practical for repeatedly logging very large datasets.</p>
<p>Any data logs that have been saved using <code>log_data = TRUE</code> can be validated by re-computing the file hash of the logged data using the timestamp stored in the corresponding trackr log file. <code>rtrackr</code> provides the <a href="https://hamishgibbs.github.io/rtrackr/reference/validate_data_log.html"><code><a href="../reference/validate_data_log.html">validate_data_log()</a></code></a> function to validate a trackr data log automatically.</p>
</div>
<div id="other-considerations" class="section level3">
<h3 class="hasAnchor">
<a href="#other-considerations" class="anchor"></a>Other considerations</h3>
<p>A primary motivation for the development of this package is the use case of data files that are processed in R and shared with users who further alter the data manually (for human data cleaning, manual updates, or record validation). It is important to consider the effect of manual record processing on data logged by <code>rtrackr</code>. When sharing data logged in <code>rtrackr</code> outside of R, please consider the special case of <a href="https://hamishgibbs.github.io/rtrackr/articles/summarising_data.html">summarising data</a>.</p>
<p><em>Article by Hamish Gibbs 2020-06-18 15:47:20. To report a problem with this package, please <a href="https://github.com/hamishgibbs/rtrackr/issues">create an issue</a> on <a href="https://github.com/hamishgibbs/rtrackr">GitHub</a>.</em></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Hamish Gibbs.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
